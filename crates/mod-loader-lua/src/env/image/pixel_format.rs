use kfc::content::image::PixelFormat;

use crate::lua::{CastLua, LuaValue};

impl CastLua<'_> for PixelFormat {
    type Output = Self;

    fn try_cast_lua(
        value: &LuaValue
    ) -> mlua::Result<Option<Self::Output>> {
        match &value {
            LuaValue::String(s) => {
                let bytes = s.as_bytes();
                let s = match str::from_utf8(bytes.as_ref()) {
                    Ok(s) => s,
                    Err(_) => return Ok(None),
                };

                match s {
                    "None" => Ok(Some(Self::None)),
                    "R4G4_unorm_pack8" => Ok(Some(Self::R4G4_unorm_pack8)),
                    "R4G4B4A4_unorm_pack16" => Ok(Some(Self::R4G4B4A4_unorm_pack16)),
                    "B4G4R4A4_unorm_pack16" => Ok(Some(Self::B4G4R4A4_unorm_pack16)),
                    "R5G6B5_unorm_pack16" => Ok(Some(Self::R5G6B5_unorm_pack16)),
                    "B5G6R5_unorm_pack16" => Ok(Some(Self::B5G6R5_unorm_pack16)),
                    "R5G5B5A1_unorm_pack16" => Ok(Some(Self::R5G5B5A1_unorm_pack16)),
                    "B5G5R5A1_unorm_pack16" => Ok(Some(Self::B5G5R5A1_unorm_pack16)),
                    "A1R5G5B5_unorm_pack16" => Ok(Some(Self::A1R5G5B5_unorm_pack16)),
                    "R8_unorm" => Ok(Some(Self::R8_unorm)),
                    "R8_snorm" => Ok(Some(Self::R8_snorm)),
                    "R8_uscaled" => Ok(Some(Self::R8_uscaled)),
                    "R8_sscaled" => Ok(Some(Self::R8_sscaled)),
                    "R8_uint" => Ok(Some(Self::R8_uint)),
                    "R8_sint" => Ok(Some(Self::R8_sint)),
                    "R8_srgb" => Ok(Some(Self::R8_srgb)),
                    "R8G8_unorm" => Ok(Some(Self::R8G8_unorm)),
                    "R8G8_snorm" => Ok(Some(Self::R8G8_snorm)),
                    "R8G8_uscaled" => Ok(Some(Self::R8G8_uscaled)),
                    "R8G8_sscaled" => Ok(Some(Self::R8G8_sscaled)),
                    "R8G8_uint" => Ok(Some(Self::R8G8_uint)),
                    "R8G8_sint" => Ok(Some(Self::R8G8_sint)),
                    "R8G8_srgb" => Ok(Some(Self::R8G8_srgb)),
                    "R8G8B8_unorm" => Ok(Some(Self::R8G8B8_unorm)),
                    "R8G8B8_snorm" => Ok(Some(Self::R8G8B8_snorm)),
                    "R8G8B8_uscaled" => Ok(Some(Self::R8G8B8_uscaled)),
                    "R8G8B8_sscaled" => Ok(Some(Self::R8G8B8_sscaled)),
                    "R8G8B8_uint" => Ok(Some(Self::R8G8B8_uint)),
                    "R8G8B8_sint" => Ok(Some(Self::R8G8B8_sint)),
                    "R8G8B8_srgb" => Ok(Some(Self::R8G8B8_srgb)),
                    "B8G8R8_unorm" => Ok(Some(Self::B8G8R8_unorm)),
                    "B8G8R8_snorm" => Ok(Some(Self::B8G8R8_snorm)),
                    "B8G8R8_uscaled" => Ok(Some(Self::B8G8R8_uscaled)),
                    "B8G8R8_sscaled" => Ok(Some(Self::B8G8R8_sscaled)),
                    "B8G8R8_uint" => Ok(Some(Self::B8G8R8_uint)),
                    "B8G8R8_sint" => Ok(Some(Self::B8G8R8_sint)),
                    "B8G8R8_srgb" => Ok(Some(Self::B8G8R8_srgb)),
                    "R8G8B8A8_unorm" => Ok(Some(Self::R8G8B8A8_unorm)),
                    "R8G8B8A8_snorm" => Ok(Some(Self::R8G8B8A8_snorm)),
                    "R8G8B8A8_uscaled" => Ok(Some(Self::R8G8B8A8_uscaled)),
                    "R8G8B8A8_sscaled" => Ok(Some(Self::R8G8B8A8_sscaled)),
                    "R8G8B8A8_uint" => Ok(Some(Self::R8G8B8A8_uint)),
                    "R8G8B8A8_sint" => Ok(Some(Self::R8G8B8A8_sint)),
                    "R8G8B8A8_srgb" => Ok(Some(Self::R8G8B8A8_srgb)),
                    "B8G8R8A8_unorm" => Ok(Some(Self::B8G8R8A8_unorm)),
                    "B8G8R8A8_snorm" => Ok(Some(Self::B8G8R8A8_snorm)),
                    "B8G8R8A8_uscaled" => Ok(Some(Self::B8G8R8A8_uscaled)),
                    "B8G8R8A8_sscaled" => Ok(Some(Self::B8G8R8A8_sscaled)),
                    "B8G8R8A8_uint" => Ok(Some(Self::B8G8R8A8_uint)),
                    "B8G8R8A8_sint" => Ok(Some(Self::B8G8R8A8_sint)),
                    "B8G8R8A8_srgb" => Ok(Some(Self::B8G8R8A8_srgb)),
                    "A8B8G8R8_unorm_pack32" => Ok(Some(Self::A8B8G8R8_unorm_pack32)),
                    "A8B8G8R8_snorm_pack32" => Ok(Some(Self::A8B8G8R8_snorm_pack32)),
                    "A8B8G8R8_uscaled_pack32" => Ok(Some(Self::A8B8G8R8_uscaled_pack32)),
                    "A8B8G8R8_sscaled_pack32" => Ok(Some(Self::A8B8G8R8_sscaled_pack32)),
                    "A8B8G8R8_uint_pack32" => Ok(Some(Self::A8B8G8R8_uint_pack32)),
                    "A8B8G8R8_sint_pack32" => Ok(Some(Self::A8B8G8R8_sint_pack32)),
                    "A8B8G8R8_srgb_pack32" => Ok(Some(Self::A8B8G8R8_srgb_pack32)),
                    "A2R10G10B10_unorm_pack32" => Ok(Some(Self::A2R10G10B10_unorm_pack32)),
                    "A2R10G10B10_snorm_pack32" => Ok(Some(Self::A2R10G10B10_snorm_pack32)),
                    "A2R10G10B10_uscaled_pack32" => Ok(Some(Self::A2R10G10B10_uscaled_pack32)),
                    "A2R10G10B10_sscaled_pack32" => Ok(Some(Self::A2R10G10B10_sscaled_pack32)),
                    "A2R10G10B10_uint_pack32" => Ok(Some(Self::A2R10G10B10_uint_pack32)),
                    "A2R10G10B10_sint_pack32" => Ok(Some(Self::A2R10G10B10_sint_pack32)),
                    "A2B10G10R10_unorm_pack32" => Ok(Some(Self::A2B10G10R10_unorm_pack32)),
                    "A2B10G10R10_snorm_pack32" => Ok(Some(Self::A2B10G10R10_snorm_pack32)),
                    "A2B10G10R10_uscaled_pack32" => Ok(Some(Self::A2B10G10R10_uscaled_pack32)),
                    "A2B10G10R10_sscaled_pack32" => Ok(Some(Self::A2B10G10R10_sscaled_pack32)),
                    "A2B10G10R10_uint_pack32" => Ok(Some(Self::A2B10G10R10_uint_pack32)),
                    "A2B10G10R10_sint_pack32" => Ok(Some(Self::A2B10G10R10_sint_pack32)),
                    "R16_unorm" => Ok(Some(Self::R16_unorm)),
                    "R16_snorm" => Ok(Some(Self::R16_snorm)),
                    "R16_uscaled" => Ok(Some(Self::R16_uscaled)),
                    "R16_sscaled" => Ok(Some(Self::R16_sscaled)),
                    "R16_uint" => Ok(Some(Self::R16_uint)),
                    "R16_sint" => Ok(Some(Self::R16_sint)),
                    "R16_sfloat" => Ok(Some(Self::R16_sfloat)),
                    "R16G16_unorm" => Ok(Some(Self::R16G16_unorm)),
                    "R16G16_snorm" => Ok(Some(Self::R16G16_snorm)),
                    "R16G16_uscaled" => Ok(Some(Self::R16G16_uscaled)),
                    "R16G16_sscaled" => Ok(Some(Self::R16G16_sscaled)),
                    "R16G16_uint" => Ok(Some(Self::R16G16_uint)),
                    "R16G16_sint" => Ok(Some(Self::R16G16_sint)),
                    "R16G16_sfloat" => Ok(Some(Self::R16G16_sfloat)),
                    "R16G16B16_unorm" => Ok(Some(Self::R16G16B16_unorm)),
                    "R16G16B16_snorm" => Ok(Some(Self::R16G16B16_snorm)),
                    "R16G16B16_uscaled" => Ok(Some(Self::R16G16B16_uscaled)),
                    "R16G16B16_sscaled" => Ok(Some(Self::R16G16B16_sscaled)),
                    "R16G16B16_uint" => Ok(Some(Self::R16G16B16_uint)),
                    "R16G16B16_sint" => Ok(Some(Self::R16G16B16_sint)),
                    "R16G16B16_sfloat" => Ok(Some(Self::R16G16B16_sfloat)),
                    "R16G16B16A16_unorm" => Ok(Some(Self::R16G16B16A16_unorm)),
                    "R16G16B16A16_snorm" => Ok(Some(Self::R16G16B16A16_snorm)),
                    "R16G16B16A16_uscaled" => Ok(Some(Self::R16G16B16A16_uscaled)),
                    "R16G16B16A16_sscaled" => Ok(Some(Self::R16G16B16A16_sscaled)),
                    "R16G16B16A16_uint" => Ok(Some(Self::R16G16B16A16_uint)),
                    "R16G16B16A16_sint" => Ok(Some(Self::R16G16B16A16_sint)),
                    "R16G16B16A16_sfloat" => Ok(Some(Self::R16G16B16A16_sfloat)),
                    "R32_uint" => Ok(Some(Self::R32_uint)),
                    "R32_sint" => Ok(Some(Self::R32_sint)),
                    "R32_sfloat" => Ok(Some(Self::R32_sfloat)),
                    "R32G32_uint" => Ok(Some(Self::R32G32_uint)),
                    "R32G32_sint" => Ok(Some(Self::R32G32_sint)),
                    "R32G32_sfloat" => Ok(Some(Self::R32G32_sfloat)),
                    "R32G32B32_uint" => Ok(Some(Self::R32G32B32_uint)),
                    "R32G32B32_sint" => Ok(Some(Self::R32G32B32_sint)),
                    "R32G32B32_sfloat" => Ok(Some(Self::R32G32B32_sfloat)),
                    "R32G32B32A32_uint" => Ok(Some(Self::R32G32B32A32_uint)),
                    "R32G32B32A32_sint" => Ok(Some(Self::R32G32B32A32_sint)),
                    "R32G32B32A32_sfloat" => Ok(Some(Self::R32G32B32A32_sfloat)),
                    "R64_uint" => Ok(Some(Self::R64_uint)),
                    "R64_sint" => Ok(Some(Self::R64_sint)),
                    "R64_sfloat" => Ok(Some(Self::R64_sfloat)),
                    "R64G64_uint" => Ok(Some(Self::R64G64_uint)),
                    "R64G64_sint" => Ok(Some(Self::R64G64_sint)),
                    "R64G64_sfloat" => Ok(Some(Self::R64G64_sfloat)),
                    "R64G64B64_uint" => Ok(Some(Self::R64G64B64_uint)),
                    "R64G64B64_sint" => Ok(Some(Self::R64G64B64_sint)),
                    "R64G64B64_sfloat" => Ok(Some(Self::R64G64B64_sfloat)),
                    "R64G64B64A64_uint" => Ok(Some(Self::R64G64B64A64_uint)),
                    "R64G64B64A64_sint" => Ok(Some(Self::R64G64B64A64_sint)),
                    "R64G64B64A64_sfloat" => Ok(Some(Self::R64G64B64A64_sfloat)),
                    "B10G11R11_ufloat_pack32" => Ok(Some(Self::B10G11R11_ufloat_pack32)),
                    "E5B9G9R9_ufloat_pack32" => Ok(Some(Self::E5B9G9R9_ufloat_pack32)),
                    "D16_unorm" => Ok(Some(Self::D16_unorm)),
                    "X8_D24_unorm_pack32" => Ok(Some(Self::X8_D24_unorm_pack32)),
                    "D32_sfloat" => Ok(Some(Self::D32_sfloat)),
                    "S8_uint" => Ok(Some(Self::S8_uint)),
                    "D16_unorm_S8_uint" => Ok(Some(Self::D16_unorm_S8_uint)),
                    "D24_unorm_S8_uint" => Ok(Some(Self::D24_unorm_S8_uint)),
                    "D32_sfloat_S8_uint" => Ok(Some(Self::D32_sfloat_S8_uint)),
                    "BC1_RGB_unorm_block" => Ok(Some(Self::BC1_RGB_unorm_block)),
                    "BC1_RGB_srgb_block" => Ok(Some(Self::BC1_RGB_srgb_block)),
                    "BC1_RGBA_unorm_block" => Ok(Some(Self::BC1_RGBA_unorm_block)),
                    "BC1_RGBA_srgb_block" => Ok(Some(Self::BC1_RGBA_srgb_block)),
                    "BC2_unorm_block" => Ok(Some(Self::BC2_unorm_block)),
                    "BC2_srgb_block" => Ok(Some(Self::BC2_srgb_block)),
                    "BC3_unorm_block" => Ok(Some(Self::BC3_unorm_block)),
                    "BC3_srgb_block" => Ok(Some(Self::BC3_srgb_block)),
                    "BC4_unorm_block" => Ok(Some(Self::BC4_unorm_block)),
                    "BC4_snorm_block" => Ok(Some(Self::BC4_snorm_block)),
                    "BC5_unorm_block" => Ok(Some(Self::BC5_unorm_block)),
                    "BC5_snorm_block" => Ok(Some(Self::BC5_snorm_block)),
                    "BC6H_ufloat_block" => Ok(Some(Self::BC6H_ufloat_block)),
                    "BC6H_sfloat_block" => Ok(Some(Self::BC6H_sfloat_block)),
                    "BC7_unorm_block" => Ok(Some(Self::BC7_unorm_block)),
                    "BC7_srgb_block" => Ok(Some(Self::BC7_srgb_block)),
                    _ => Ok(None),
                }
            },
            _ => Ok(None),
        }
    }

    fn name() -> std::borrow::Cow<'static, str> {
        "a valid keen::PixelFormat variant".into()
    }
}
